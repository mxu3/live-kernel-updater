<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>live-kernel-updater by mxu3</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>live-kernel-updater</h1>
          <h2>change the kernel on the running MX live-USB or antiX distro  -- plus a great MX wiki</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/mxu3/live-kernel-updater/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/mxu3/live-kernel-updater/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/mxu3/live-kernel-updater" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h2>
<a id="feel-free-to-edit-the-mx-distro-freedom-wiki-at" class="anchor" href="#feel-free-to-edit-the-mx-distro-freedom-wiki-at" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>feel free to edit the MX distro freedom wiki at</h2>

<h3>
<a id="httpsgithubcommxu3live-kernel-updaterwiki" class="anchor" href="#httpsgithubcommxu3live-kernel-updaterwiki" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="https://github.com/mxu3/live-kernel-updater/wiki">https://github.com/mxu3/live-kernel-updater/wiki</a>
</h3>

<hr>

<h1>
<a id="live-kernel-updater" class="anchor" href="#live-kernel-updater" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>live-kernel-updater</h1>

<p>test status : no successful kernel change yet performed on updated MX-15 </p>

<p>This is a bash command line program that changes or updates the kernel on a antiX or MX
live-usb. It can work on a running live-usb (primary) or on a secondary live-usb that is plugged in.</p>

<h3>
<a id="quick-start" class="anchor" href="#quick-start" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Quick Start</h3>

<pre><code>from  https://mxu3.github.io/live-kernel-updater  download the master.zip with firefox, or:

sudo apt-get update       # if needed
sudo apt-get install git  # if needed
git clone https://github.com/BitJam/live-kernel-updater
git clone https://github.com/BitJam/cli-shell-utils       ##  contains library bash code
cd live-kernel-updater
sudo ./live-kernel-updater
</code></pre>

<h2>
<a id="synopsis" class="anchor" href="#synopsis" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Synopsis</h2>

<p>This program is command line only for the time being.  We try to avoid making your
live-usb unbootable so you need to install a new kernel and then do a
remaster before we will attempt to update the live kernel, i.e. deal with initrd asf..<br>
We do this by always looking for new kernels inside of the linuxfs file (in /boot) so we
know it will be available upon next boot.</p>

<p>It can update a running live system or a live-usb that you plugged in, e.g. on a SD-card.
You will be prompted with choices if you do not already specify what you want to do via command line options.</p>

<p>The log file is at <code>/var/log/live-kernel-updater.log</code> </p>

<p>It will automatically create a config file for itself at
<code>/root/.config/live-kernel-updater/live-kernel-updater.conf</code></p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<pre><code>Usage: live-kernel-updater [options] [command]

Update the kernel on a running antiX or MX live-usb or on an antiX or MX live-usb
that is plugged into another system, like on a secondary USB-thumbdrive.  
The new kernel files must already be installed, i.e. present on the SD-card.
You will be prompted for necessary information missing from command line arguments.

Commands:
   all         All of the commands below
   unpack      Unpack the old initrd
   copy        Copy kernel modules into initrd
   repack      Repack the new initrd
   install     Copy new initrd and vmlinuz to the live boot directory

Options:
  -a --auto             Non-interactive mode, this will always preset the safest option
     --color=&lt;xxx&gt;      Set color scheme to off|low|high
  -D --debug            Pause before cleaning up
  -d --device=&lt;device&gt;  live-usb device to update the kernel on
                        (use "live" to force updating a running live system)
  -F --force=XXXX       Force the options specfied:
                             flock:  ignore missing flock program (flock - manage locks from shell scripts)
                               usb:  Allow non-usb devices as target drive (dangerous!)
                             clear:  remove previous initrd directory
  -h --help -?          Show this usage info
  -i --initrd=&lt;name&gt;    Name of initrd file (initrd.gz).  If the name has
                        leading / then treated as full path to alternate initrd
  -I --ignore-config    Ignore the configuration file
  -k --kernel=&lt;kernel&gt;  The version (uname -r) of the new kernel
  -K --keep-old         Keep the old module directory in the initrd
  -p --pretend          Do not actually install the new kernel or initrd.gz (dry run for testing the script)
     --pause=&lt;list&gt;     Pause after certain stages of processing:
                            mount
                            unpack
                            copy
                            repack
                            install

  -q --quiet            Print less info
  -R --reset-config     Write fresh config file with default options
  -v --verbose          Print more info, show commands when run
  -W --write-config     Write/update config file preserving current options

Notes:
  - short options stack. Example: -pq instead of --pretend --quiet
  - options can be intermingled with commands and parameters

  - config file: /root/.config/live-kernel-updater/live-kernel-updater.conf
  - the config file will be sourced if it exists
  - it will be created if it does not exist
</code></pre>

<h3>
<a id="notes-from-the-original-release-thread" class="anchor" href="#notes-from-the-original-release-thread" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>notes from the original release thread</h3>

<p><a href="http://forum.mepiscommunity.org/viewtopic.php?f=77&amp;t=40423#p390788">http://forum.mepiscommunity.org/viewtopic.php?f=77&amp;t=40423#p390788</a></p>

<p>If you have previously tested this program then please add the -R (--reset-config) command line option the first time you run this new version. That will cause it to create a new default config file.</p>

<p>Notes:</p>

<pre><code>You must first install a new kernel and then do a live-remaster or this program will refuse to run

It should work on frugal systems now
I plan to release a similar program, live-usb-maker, soon
I *think* the program is operating correctly
I'm interested in feedback about the UI (user interface)
I'm interested in feedback about the help/man page
I plan to make the beta release after we have it all packaged in .deb files
</code></pre>
        </section>

        <footer>
          live-kernel-updater is maintained by <a href="https://github.com/mxu3">mxu3</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
